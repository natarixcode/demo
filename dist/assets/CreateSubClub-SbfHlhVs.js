import{u as N,a as C,c as w,r as i,R as e}from"./index-C8OgQ19d.js";const k=()=>{const{user:y,getAuthHeader:b}=N(),u=C(),{communityId:s}=w(),[p,f]=i.useState(null),[t,g]=i.useState({name:"",description:"",visibility:"public",type:"agnostic",location:"",latitude:"",longitude:""}),[a,c]=i.useState(!1),[d,r]=i.useState("");if(!y)return u("/login"),null;i.useEffect(()=>{E()},[s]);const E=async()=>{try{const n=await(await fetch(`http://localhost:3001/api/communities/${s}`,{headers:{"Content-Type":"application/json",...b()}})).json();n.success?(f(n.data),n.data.user_role||r("You must be a member of the community to create a sub-club")):r(n.error||"Community not found")}catch(l){console.error("Error fetching community:",l),r("Failed to load community")}},o=l=>{const{name:n,value:m}=l.target;g(v=>({...v,[n]:m})),d&&r("")},h=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(l=>{g(n=>({...n,latitude:l.coords.latitude.toString(),longitude:l.coords.longitude.toString()}))},l=>{console.error("Error getting location:",l),alert("Unable to get your location. Please enter it manually.")}):alert("Geolocation is not supported by this browser.")},x=async l=>{if(l.preventDefault(),c(!0),r(""),!t.name.trim()){r("Sub-club name is required"),c(!1);return}if(t.type==="location_bound"&&!t.location.trim()){r("Location is required for location-bound sub-clubs"),c(!1);return}try{const m=await(await fetch("http://localhost:3001/api/sub-clubs",{method:"POST",headers:{"Content-Type":"application/json",...b()},body:JSON.stringify({...t,community_id:parseInt(s),latitude:t.latitude?parseFloat(t.latitude):null,longitude:t.longitude?parseFloat(t.longitude):null})})).json();m.success?u(`/communities/${s}`):r(m.error||"Failed to create sub-club")}catch(n){console.error("Error creating sub-club:",n),r("Failed to create sub-club. Please try again.")}finally{c(!1)}};return p?e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-6"},e.createElement("div",{className:"max-w-2xl mx-auto"},e.createElement("div",{className:"bg-white rounded-lg shadow-md p-8"},e.createElement("div",{className:"mb-6"},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"Create New Sub-Club"),e.createElement("p",{className:"text-gray-600"},"Creating a sub-club in ",e.createElement("strong",null,p.name))),d&&e.createElement("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-6"},d),e.createElement("form",{onSubmit:x,className:"space-y-6"},e.createElement("div",null,e.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2"},"Sub-Club Name *"),e.createElement("input",{type:"text",id:"name",name:"name",value:t.name,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter sub-club name",required:!0,disabled:a})),e.createElement("div",null,e.createElement("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2"},"Description"),e.createElement("textarea",{id:"description",name:"description",value:t.description,onChange:o,rows:"4",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Describe your sub-club...",disabled:a})),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Visibility *"),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center"},e.createElement("input",{type:"radio",name:"visibility",value:"public",checked:t.visibility==="public",onChange:o,className:"mr-2",disabled:a}),e.createElement("span",{className:"text-sm"},e.createElement("strong",null,"Public")," - Community members can join immediately")),e.createElement("label",{className:"flex items-center"},e.createElement("input",{type:"radio",name:"visibility",value:"private",checked:t.visibility==="private",onChange:o,className:"mr-2",disabled:a}),e.createElement("span",{className:"text-sm"},e.createElement("strong",null,"Private")," - Requires approval to join")))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Sub-Club Type *"),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"flex items-center"},e.createElement("input",{type:"radio",name:"type",value:"agnostic",checked:t.type==="agnostic",onChange:o,className:"mr-2",disabled:a}),e.createElement("span",{className:"text-sm"},e.createElement("strong",null,"Location Agnostic")," - Inherits from parent community")),e.createElement("label",{className:"flex items-center"},e.createElement("input",{type:"radio",name:"type",value:"location_bound",checked:t.type==="location_bound",onChange:o,className:"mr-2",disabled:a}),e.createElement("span",{className:"text-sm"},e.createElement("strong",null,"Location Bound")," - Override with specific location")))),t.type==="location_bound"&&e.createElement("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg"},e.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Location Information"),e.createElement("div",null,e.createElement("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2"},"Location (City, State/Country) *"),e.createElement("input",{type:"text",id:"location",name:"location",value:t.location,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Downtown San Francisco, CA",required:t.type==="location_bound",disabled:a})),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:"latitude",className:"block text-sm font-medium text-gray-700 mb-2"},"Latitude (Optional)"),e.createElement("input",{type:"number",id:"latitude",name:"latitude",value:t.latitude,onChange:o,step:"any",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"37.7749",disabled:a})),e.createElement("div",null,e.createElement("label",{htmlFor:"longitude",className:"block text-sm font-medium text-gray-700 mb-2"},"Longitude (Optional)"),e.createElement("input",{type:"number",id:"longitude",name:"longitude",value:t.longitude,onChange:o,step:"any",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"-122.4194",disabled:a}))),e.createElement("button",{type:"button",onClick:h,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",disabled:a},"ðŸ“ Get My Location")),e.createElement("div",{className:"flex gap-4 pt-6"},e.createElement("button",{type:"submit",disabled:a,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium"},a?"Creating...":"Create Sub-Club"),e.createElement("button",{type:"button",onClick:()=>u(`/communities/${s}`),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:a},"Cancel")))))):e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-6"},e.createElement("div",{className:"max-w-2xl mx-auto"},e.createElement("div",{className:"bg-white rounded-lg shadow-md p-8"},e.createElement("div",{className:"animate-pulse"},e.createElement("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-4"}),e.createElement("div",{className:"h-4 bg-gray-300 rounded w-2/3 mb-6"})))))};export{k as default};
